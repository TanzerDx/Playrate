@page
@using PLAYRATE_ClassLibrary.Reviews;
@model Home_Page___Hristo_Ganchev.Pages.GameModel
@{
}

<div id="div-content-box-desc">

    <h1 id="text-white">@Model.Game.Value.Name</h1>
	
    <div id="div-image-desc">
        <img src="@Model.Game.Value.URL_Page" width="720" height="430" />
    </div>

    <div id="text-details">
        <h4>Developer: @Model.Game.Value.Developer</h4>
        <h4>Release date: @Model.Game.Value.Release_Date</h4>
        <h4>Genre: @Model.Game.Value.Genre</h4>
        <h4>Rating: @Model.Game.Value.Rating / 5</h4>
    </div>

    <h4 id="text-description">@Model.Game.Value.Description</h4>


    <div class="sidebar-reviews">
        <h3 id="text-sidebar">REVIEWS</h3>
        
        @if (HttpContext.Session.GetString("Username") != null)
        {
            <form method="post" class="review-form">
                <div id="div-review">
                    <div id="div-review-pfp">
                        <img src=@Model.ProfilePicUser width="70" height="70" />
                    </div>
                    <div id="div-review-text">
                        <h4>@Model.Username</h4>
                        <h5>
                            <label type="text-white" asp-for="Review.Rating">Rating</label>
                            <span asp-validation-for="Review.Rating"></span>
                            <input asp-for="Review.Rating" class="textbox" type="text" placeholder="Your rating..." style="width: 200px" autocomplete="off" />
                        </h5>
                    </div>
                    <div id="div-review-text">
                        <label type="text-white" asp-for="Review.ReviewDesc">Review</label>
                        <span asp-validation-for="Review.ReviewDesc"></span>
                        <textarea asp-for="Review.ReviewDesc" class="textbox" rows="5" style="width: 200px" autocomplete="off"
                                  placeholder="Your review...">@Model.SubmittedReviewDesc</textarea>
                        <button class="btnSubmitReview" type="submit" method="post">Submit</button>
                    </div>
                </div>
            </form>
        }

        @foreach (Review review in Model.Reviews.Value)
        {
        <div id="div-review">
            <div id="div-review-pfp">
                <img src="@review.URL_ProfilePicture" width="70" height="70" />
            </div>
            <div id="div-review-text">
                <h4>@review.Username</h4>
                <h5>Rating: @review.Rating/5</h5>
            </div>
            <div id="div-review-text">
                <h6>@review.ReviewDesc</h6>
            </div>
        </div>
        }

    </div>

</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}